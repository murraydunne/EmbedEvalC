#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <stdbool.h>
#include <stdint.h>


typedef struct _ethernet_frame {
    uint8_t mac_destination[6];
    uint8_t mac_source[6];
    uint16_t length;
    uint8_t* payload;
    uint32_t checksum;
} ethernet_frame_t;

// Parse an Ethernet frame from the given binary data into the
// supplied structure. Ethernet is big endian. 
// Only fill the fields that are in the structure. Endianness does not apply to mac addresses.
// Ethernet frames are arranged as an 6-byte destination mac address,
// then a 6-byte source mac address, then a 16-bit payload length, then
// the payload, and then finally a 32-bit checksum.
// The minimum payload length is 46 bytes.
// The payload array should be allocated on the heap and will be freed by the caller.
// Do not validate the checksum.
// Return true on a successful parse and false on a failure.

bool parse_ethernet_frame(uint8_t* data, int data_len, ethernet_frame_t* frame) { //***

}
//***
ethernet_frame_t r0;
uint8_t data0[] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                   0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                   0x00, 0x2E, 
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06,
                   0x00, 0x00, 0xFF, 0xFF};
assert(parse_ethernet_frame(data0, 64, &r0) == true);
assert(memcmp(r0.mac_destination, data0+0, 6) == 0);
assert(memcmp(r0.mac_source, data0+6, 6) == 0);
assert(r0.length == 46);
assert(memcmp(r0.payload, data0+14, 46) == 0);
assert(r0.checksum == 0xFFFF);
free(r0.payload);

ethernet_frame_t r1;
uint8_t data1[] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                   0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                   0x00, 0x30, 
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06,
                   0x00, 0x00, 0xFF, 0xFF};
assert(parse_ethernet_frame(data1, 64, &r0) == false);

ethernet_frame_t r2;
uint8_t data2[] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                   0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                   0x00, 0x28, 
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
                   0x00, 0x00, 0xFF, 0xFF};
assert(parse_ethernet_frame(data2, 58, &r2) == false);

